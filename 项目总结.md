## 为什么用红黑树

平衡

天然有序

支持范围查询

插入最坏只要两次旋转

删除最坏只要三次旋转







#### 火山模型

##### 火山模型的优点

简单清晰，算子耦合度低。

##### 火山模型的缺点

数据以行为单位处理，不利于CPU cache发挥作用。

调用的 next() 为虚函数，开销大：

1. 内存开销：需要开辟虚函数表
2. 运行时开销：运行时需要查表
3. 优化限制：不能 inline



### SQL 优化

少用子查询

用in替代or

limit M, N -> where id > M, limit N

in 和 exist 区别



### 索引失效

最左匹配

索引列操作

类型转换

like % 以通配符开头



使用前缀索引